#include <iostream>
#include <algorithm>
#include <cstring>
#include <string>

using namespace std;

char whloeExp[200];
int ptr = 0;

bool Not();
bool factor();
bool exp();

bool Not()
{
	switch (whloeExp[ptr]){
	case 'V':
		return true;
		break;
	case 'F':
		return false;
		break;
	case '(':
		ptr++;
		return exp();
		break;
	case '!':
		ptr++;
		return !Not();
		break;
	
	}
}


bool factor()
{
	bool result;

	switch (whloeExp[ptr]){
	case '!':
		result = Not();
		ptr++;
		return result;
		break;
	case '(':
		ptr++;
		result = exp();
		ptr++;
		break;
	case 'V':
		ptr++;
		return true;
		break;
	case 'F':
		ptr++;
		return false;
		break;	
	default:
		break;
	}
}

bool exp()
{
	char c;
	bool result;
	result = factor();
	while (true){			//假设还有下一个表达式
		if ((c = whloeExp[ptr]) == '|' || whloeExp[ptr] == '&'){
			ptr++;
			if (c == '|')
				result = result | factor();
			else
				result = result & factor();
		}
		break;
	}
	return result;
}

int main()
{
	string str = "!(V)";
	bool result;
	for (int i = 0; i < str.length(); i++)
		whloeExp[i] = str.at(i);
	result = exp();
	if (result)
		cout << "true";
	else
		cout << "false";
	system("pause");

}
